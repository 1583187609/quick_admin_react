import{r as l,j as n}from"./react-0fb5d424.js";import{f as j,P as A,h as w,D as k}from"./index-a637b915.js";import{G as E,a as P,P as R}from"./mock-c437d3a2.js";import{B as z}from"./index-29190d53.js";import g from"./AddEdit-19e7f09f.js";import"./dayjs-e40d92c3.js";import N from"./index-e440e085.js";import"./lodash-a5a67b6f.js";import{t as q}from"./antd-d4271c6f.js";import{aA as F,O as L}from"./@ant-design-60842819.js";import"./@babel-25fffde3.js";import"./react-dom-0d6193a3.js";import"./scheduler-765c72db.js";import"./react-router-dom-8732fd06.js";import"./react-router-3e4edb2d.js";import"./@remix-run-7c45f29c.js";import"./react-redux-54c164ec.js";import"./use-sync-external-store-29364900.js";import"./mock-95d2a412.js";import"./mockjs-9c967a30.js";import"./@reduxjs-c09949f6.js";import"./redux-ea15d17b.js";import"./reselect-8f3bbdd7.js";import"./redux-thunk-f771c803.js";import"./axios-4a70c6fc.js";import"./qs-0173dd19.js";import"./side-channel-5b5a05bd.js";import"./get-intrinsic-45907aec.js";import"./has-symbols-e8f3ca0e.js";import"./has-proto-f7d0b240.js";import"./function-bind-61637ca6.js";import"./has-57b382c3.js";import"./call-bind-c38f6426.js";import"./object-inspect-42714f7a.js";import"./vite-plugin-mock-d7a8ead1.js";import"./path-to-regexp-31db6522.js";import"./rc-util-48ba7f71.js";import"./react-is-e8e5dbb3.js";import"./classnames-fe2c27d8.js";import"./rc-resize-observer-745b2131.js";import"./resize-observer-polyfill-0f9f8adb.js";import"./rc-motion-eb90ae56.js";import"./rc-picker-6e445fc6.js";import"./@rc-component-ed6c637d.js";import"./@ctrl-fb5a5473.js";import"./rc-tabs-3b6d1d00.js";import"./rc-dropdown-3ade4447.js";import"./rc-menu-83466686.js";import"./rc-overflow-114563da.js";import"./rc-trigger-8e81b561.js";import"./rc-align-3928b621.js";import"./dom-align-ecb06dd6.js";import"./rc-cascader-5bc29b89.js";import"./rc-select-3f77be03.js";import"./rc-virtual-list-27fe0724.js";import"./rc-tree-586f51e7.js";import"./rc-input-number-83428087.js";import"./rc-collapse-62224ade.js";import"./rc-drawer-f0808ac3.js";import"./rc-field-form-10847344.js";import"./async-validator-dee29e8b.js";import"./scroll-into-view-if-needed-640b7801.js";import"./compute-scroll-into-view-50f8bc03.js";import"./rc-image-1fde4eb3.js";import"./rc-dialog-fa40b945.js";import"./rc-notification-3e0c56c9.js";import"./rc-tooltip-f3685bbd.js";import"./rc-rate-49702ee4.js";import"./rc-slider-a4dd6cf2.js";import"./rc-steps-fcee3d43.js";import"./rc-switch-9e1e6b4a.js";import"./rc-table-dcede9bc.js";import"./rc-pagination-88d89b42.js";import"./throttle-debounce-87e7e444.js";import"./rc-checkbox-d7b3fa29.js";import"./rc-input-3e170e62.js";import"./rc-textarea-3d294471.js";import"./rc-upload-215eca2a.js";import"./rc-progress-48fe049f.js";import"./@emotion-c0b5c018.js";import"./stylis-c78c9806.js";import"./index-26ffef6b.js";import"./index-c64ec2e7.js";import"./index-d508fdd2.js";import"./index-6367f25a.js";const D=t=>j("get","/options/school",t),_=t=>j("get","/options/company",t),S={school:{reqNameKey:"name",resValKey:"id",fetchApi:D,defaultField:{prop:"xx",label:"学校",type:"select"},handleItem(t){const{name:e,id:i}=t;return{label:e,value:i}}},company:{reqNameKey:"name",resValKey:"id",fetchApi:_,defaultField:{prop:"gs",label:"公司",type:"select"},handleItem(t){const{fullName:e,shortName:i,id:s}=t;return{label:e,value:s,shortName:i}}}},K=()=>{function t(e,i,s,c){if(!S[e])throw new Error(`不存在type为${e}的类型`);const{fetchApi:f,defaultField:u,handleItem:h,reqNameKey:y="name",resValKey:I="id",extraParams:o}=S[e],[a,r]=l.useState(!1),[p,d]=l.useState([]),[v,C]=l.useState(),x=(m="")=>{r(!0),f({[y]:m,...o}).then(b=>{d((b||[]).map(h))}).finally(()=>{r(!1)})},O=m=>{if(C(m),!c)return;const b=p.find(B=>B.value===m);c(m,b)};return l.useEffect(()=>{s&&x(s)},[]),{...u,...i,attrs:{value:v,options:p,showSearch:!0,notFoundContent:a?n.jsx(q,{size:"small"}):null,onSearch:x,onFocus:m=>x(),onChange:O}}}return{getSearchOpts:t}},T=({getSearchOpts:t})=>[{name:"name",label:"姓名"},{name:"status",label:"启用状态",type:"Select",attrs:{options:"EnableStatus"}},{name:"qqxl",label:"请求下拉",type:"Select",attrs:{options:"TestFetchAsync"}},{name:"type",label:"多标签",type:"Select",attrs:{mode:"multiple",options:"RoleType"}},{name:"age",label:"年龄",type:"BaseNumberRange"},{name:"jzdz",label:"居住地址",type:"Cascader",attrs:{options:"Region"}},t("school",{name:"school",label:"学校",type:"Select",otherAttrs:{popover:"采用hooks封装复杂逻辑"}}),t("company",{name:"company",label:"公司",type:"Select",otherAttrs:{popover:"hooks封装且自定义选择下拉项"}}),{name:"sz_obj",label:"数字(对象)",type:"BaseNumberRange"},{name:"sz_def",label:"数字(默值)",type:"BaseNumberRange"},{name:"rq_arr",label:"日期(数组)",type:"DateRangePicker"},{name:"rq_obj",label:"日期(对象)",type:"DateRangePicker"},{name:"rq_def",label:"日期(默值)",type:"DateRangePicker"},{name:"zdy",label:"自定义",render:e=>"【这是自定义的搜索项】",otherAttrs:{popover:"在搜索表单中一般几乎用不到自定义特性，此处用作示例"}}],G=[{type:"UserInfo",title:"自定义组件列-内置[UserInfo]"},{dataIndex:"zdyzj",title:"自定义组件-非内置",width:150,render:(t,e,i)=>n.jsx(N,{data:e})},{dataIndex:"name",title:"自定义表格头",width:120},{dataIndex:"avatar",type:"BaseImg",title:"图片[BaseImg]"},{type:"BaseText",dataIndex:"produce",title:"自我介绍[BaseText]"},{type:"BaseCopy",dataIndex:"avatar",title:"文本复制[BaseCopy]"},{dataIndex:"phone",title:"formatter列",render:(t,e,i)=>`formatter列${i}`},{type:"BaseTag",title:"状态[BaseTag]",width:120},{dataIndex:"create_time",title:"时间（内置宽度）"},{type:"create",dataIndex:"create_time",title:"创建时间[create]",otherAttrs:{popover:"传入字符串类型的dataIndex"}},{type:"update",title:"修改时间[update]",otherAttrs:{popover:"不传或传入数组类型的dataIndex"}},{type:"switch",title:"启/禁用"},{type:"remark",title:"备注[remark]"},{dataIndex:"wltl",title:"未联调列",otherAttrs:{popover:"未联调列，表格头部会被标红"}}],Ie=()=>{const{getSearchOpts:t}=K(),{openPopup:e}=l.useContext(A),i=T({getSearchOpts:t}),s=l.useRef(null);function c(o,{params:a,ids:r,fields:p},d){w({add:()=>e("新增",n.jsx(g,{refreshList:d})),delete:()=>u(r,d),export:()=>h({...a,exports:{ids:r,fields:p}},d)},o)}function f(o,a,r){const{id:p}=a;w({edit:()=>e("编辑",n.jsx(g,{id:p,refreshList:r})),view:()=>e("查看",n.jsx(g,{id:p,disabled:!0})),delete:()=>u([p],r),forbid:()=>I(p,r),enable:()=>y(p,r)},o)}function u(o,a){k(o).then(r=>a())}function h(o,a){P(o).then(r=>a())}function y(o,a){R({id:o}).then(r=>a())}function I(o,a){R({id:o}).then(r=>a())}return n.jsx(z,{ref:s,fields:i,columns:G,fetch:E,extraBtns:["add","delete",{name:"import",customRules:!1},{name:"export",customRules:!1},"enable","forbid","repeal","upload","download","pass","reject",{name:"dialog",text:"打开modal列表",attrs:{type:"primary",icon:n.jsx(F,{})}},{name:"drawer",text:"打开drawer表单",attrs:{type:"primary",icon:"ReconciliationOutlined"}},{name:"view",text:"url跳转",to:"/system/user/detail?id=12",order:50,attrs:{icon:"LinkOutlined"}},{name:"zdy",text:"自定义按钮",attrs:{type:"default",icon:"ReadOutlined"}}],operateBtns:["edit","delete","view",o=>o.status===2?"enable":"forbid",{name:"any-custom-name",text:"自定义按钮",icon:n.jsx(L,{}),attrs:{danger:!0}}],onExtraBtn:c,onOperateBtn:f,selection:!0})};export{G as columns,Ie as default};
