import{e as S,b as p}from"./@babel-25fffde3.js";import{e as i,r as he}from"./react-0fb5d424.js";import{K as V,A as ee,p as be}from"./rc-util-48ba7f71.js";import{c as ae}from"./classnames-fe2c27d8.js";function He(e){var l=e.pageXOffset,r="scrollLeft";if(typeof l!="number"){var n=e.document;l=n.documentElement[r],typeof l!="number"&&(l=n.body[r])}return l}function Ie(e){var l,r,n=e.ownerDocument,u=n.body,R=n&&n.documentElement,f=e.getBoundingClientRect();return l=f.left,r=f.top,l-=R.clientLeft||u.clientLeft||0,r-=R.clientTop||u.clientTop||0,{left:l,top:r}}function Se(e){var l=Ie(e),r=e.ownerDocument,n=r.defaultView||r.parentWindow;return l.left+=He(n),l.left}function Ve(e,l){var r=e.disabled,n=e.prefixCls,u=e.character,R=e.characterRender,f=e.index,k=e.count,C=e.value,_=e.allowHalf,y=e.focused,x=e.onHover,m=e.onClick,D=function(g){x(g,f)},N=function(g){m(g,f)},E=function(g){g.keyCode===V.ENTER&&m(g,f)},w=f+1,s=new Set([n]);C===0&&f===0&&y?s.add("".concat(n,"-focused")):_&&C+.5>=w&&C<w?(s.add("".concat(n,"-half")),s.add("".concat(n,"-active")),y&&s.add("".concat(n,"-focused"))):(w<=C?s.add("".concat(n,"-full")):s.add("".concat(n,"-zero")),w===C&&y&&s.add("".concat(n,"-focused")));var c=typeof u=="function"?u(e):u,h=i.createElement("li",{className:ae(Array.from(s)),ref:l},i.createElement("div",{onClick:r?null:N,onKeyDown:r?null:E,onMouseMove:r?null:D,role:"radio","aria-checked":C>f?"true":"false","aria-posinset":f+1,"aria-setsize":k,tabIndex:r?-1:0},i.createElement("div",{className:"".concat(n,"-first")},c),i.createElement("div",{className:"".concat(n,"-second")},c)));return R&&(h=R(h,e)),h}const _e=i.forwardRef(Ve);function xe(){var e=he.useRef({});function l(n){return e.current[n]}function r(n){return function(u){e.current[n]=u}}return[l,r]}function De(e,l){var r,n=e.prefixCls,u=n===void 0?"rc-rate":n,R=e.className,f=e.style,k=e.defaultValue,C=e.value,_=e.count,y=_===void 0?5:_,x=e.allowHalf,m=x===void 0?!1:x,D=e.allowClear,N=D===void 0?!0:D,E=e.character,w=E===void 0?"â˜…":E,s=e.characterRender,c=e.disabled,h=e.direction,b=h===void 0?"ltr":h,g=e.tabIndex,ne=g===void 0?0:g,te=e.autoFocus,H=e.onHoverChange,F=e.onChange,M=e.onFocus,K=e.onBlur,L=e.onKeyDown,re=xe(),A=S(re,2),le=A[0],oe=A[1],$=i.useRef(null),O=function(){if(!c){var a;(a=$.current)===null||a===void 0||a.focus()}};i.useImperativeHandle(l,function(){return{focus:O,blur:function(){if(!c){var a;(a=$.current)===null||a===void 0||a.blur()}}}});var ue=ee(k||0,{value:C}),X=S(ue,2),T=X[0],ce=X[1],ie=ee(null),z=S(ie,2),fe=z[0],B=z[1],G=function(a,d){var o=b==="rtl",t=a+1;if(m){var U=be(le(a)),Y=Se(U),Z=U.clientWidth;(o&&d-Y>Z/2||!o&&d-Y<Z/2)&&(t-=.5)}return t},I=function(a){ce(a),F==null||F(a)},de=i.useState(!1),P=S(de,2),se=P[0],W=P[1],ve=function(){W(!0),M==null||M()},me=function(){W(!1),K==null||K()},ge=i.useState(null),j=S(ge,2),q=j[0],J=j[1],Ce=function(a,d){var o=G(d,a.pageX);o!==fe&&(J(o),B(null)),H==null||H(o)},Q=function(){J(null),B(null),H==null||H(void 0)},ye=function(a,d){var o=G(d,a.pageX),t=!1;N&&(t=o===T),Q(),I(t?0:o),B(t?o:null)},Re=function(a){var d=a.keyCode,o=b==="rtl",t=T;d===V.RIGHT&&t<y&&!o?(m?t+=.5:t+=1,I(t),a.preventDefault()):d===V.LEFT&&t>0&&!o||d===V.RIGHT&&t>0&&o?(m?t-=.5:t-=1,I(t),a.preventDefault()):d===V.LEFT&&t<y&&o&&(m?t+=.5:t+=1,I(t),a.preventDefault()),L==null||L(a)};i.useEffect(function(){te&&!c&&O()},[]);var we=new Array(y).fill(0).map(function(v,a){return i.createElement(_e,{ref:oe(a),index:a,count:y,disabled:c,prefixCls:"".concat(u,"-star"),allowHalf:m,value:q===null?T:q,onClick:ye,onHover:Ce,key:a,character:w,characterRender:s,focused:se})});return i.createElement("ul",{className:ae(u,R,(r={},p(r,"".concat(u,"-disabled"),c),p(r,"".concat(u,"-rtl"),b==="rtl"),r)),style:f,onMouseLeave:c?null:Q,tabIndex:c?-1:ne,onFocus:c?null:ve,onBlur:c?null:me,onKeyDown:c?null:Re,ref:$,role:"radiogroup"},we)}const Me=i.forwardRef(De);export{Me as R};
