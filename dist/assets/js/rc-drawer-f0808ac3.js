import{f as c,e as U,g as ae,b as te}from"./@babel-25fffde3.js";import{r as a}from"./react-0fb5d424.js";import{P as fe}from"./@rc-component-ed6c637d.js";import{a as me,K as Q,d as ne}from"./rc-util-48ba7f71.js";import{c as z}from"./classnames-fe2c27d8.js";import{C as re}from"./rc-motion-eb90ae56.js";var ve=function(t){var u=t.prefixCls,h=t.className,d=t.style,f=t.children,l=t.containerRef;return a.createElement(a.Fragment,null,a.createElement("div",{className:z("".concat(u,"-content"),h),style:c({},d),"aria-modal":"true",role:"dialog",ref:l},f))},oe=a.createContext(null);function le(e){return typeof e=="string"&&String(Number(e))===e?(me(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var ie={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function he(e,t){var u,h,d,f,l=e.prefixCls,i=e.open,m=e.placement,L=e.inline,k=e.push,T=e.forceRender,_=e.autoFocus,W=e.keyboard,I=e.rootClassName,F=e.rootStyle,x=e.zIndex,B=e.className,K=e.style,b=e.motion,E=e.width,H=e.height,V=e.children,M=e.contentWrapperStyle,R=e.mask,X=e.maskClosable,Y=e.maskMotion,A=e.maskClassName,j=e.maskStyle,D=e.afterOpenChange,s=e.onClose,g=a.useRef(),v=a.useRef(),P=a.useRef();a.useImperativeHandle(t,function(){return g.current});var q=function(o){var p=o.keyCode,N=o.shiftKey;switch(p){case Q.TAB:{if(p===Q.TAB){if(!N&&document.activeElement===P.current){var G;(G=v.current)===null||G===void 0||G.focus({preventScroll:!0})}else if(N&&document.activeElement===v.current){var J;(J=P.current)===null||J===void 0||J.focus({preventScroll:!0})}}break}case Q.ESC:{s&&W&&(o.stopPropagation(),s(o));break}}};a.useEffect(function(){if(i&&_){var n;(n=g.current)===null||n===void 0||n.focus({preventScroll:!0})}},[i]);var Z=a.useState(!1),w=U(Z,2),O=w[0],S=w[1],r=a.useContext(oe),$;k===!1?$={distance:0}:k===!0?$={}:$=k||{};var y=(u=(h=(d=$)===null||d===void 0?void 0:d.distance)!==null&&h!==void 0?h:r==null?void 0:r.pushDistance)!==null&&u!==void 0?u:180,se=a.useMemo(function(){return{pushDistance:y,push:function(){S(!0)},pull:function(){S(!1)}}},[y]);a.useEffect(function(){if(i){var n;r==null||(n=r.push)===null||n===void 0||n.call(r)}else{var o;r==null||(o=r.pull)===null||o===void 0||o.call(r)}},[i]),a.useEffect(function(){return function(){var n;r==null||(n=r.pull)===null||n===void 0||n.call(r)}},[]);var ce=R&&a.createElement(re,ae({key:"mask"},Y,{visible:i}),function(n,o){var p=n.className,N=n.style;return a.createElement("div",{className:z("".concat(l,"-mask"),p,A),style:c(c({},N),j),onClick:X&&i?s:void 0,ref:o})}),ue=typeof b=="function"?b(m):b,C={};if(O&&y)switch(m){case"top":C.transform="translateY(".concat(y,"px)");break;case"bottom":C.transform="translateY(".concat(-y,"px)");break;case"left":C.transform="translateX(".concat(y,"px)");break;default:C.transform="translateX(".concat(-y,"px)");break}m==="left"||m==="right"?C.width=le(E):C.height=le(H);var de=a.createElement(re,ae({key:"panel"},ue,{visible:i,forceRender:T,onVisibleChanged:function(o){D==null||D(o)},removeOnLeave:!1,leavedClassName:"".concat(l,"-content-wrapper-hidden")}),function(n,o){var p=n.className,N=n.style;return a.createElement("div",{className:z("".concat(l,"-content-wrapper"),p),style:c(c(c({},C),N),M)},a.createElement(ve,{containerRef:o,prefixCls:l,className:B,style:K},V))}),ee=c({},F);return x&&(ee.zIndex=x),a.createElement(oe.Provider,{value:se},a.createElement("div",{className:z(l,"".concat(l,"-").concat(m),I,(f={},te(f,"".concat(l,"-open"),i),te(f,"".concat(l,"-inline"),L),f)),style:ee,tabIndex:-1,ref:g,onKeyDown:q},ce,a.createElement("div",{tabIndex:0,ref:v,style:ie,"aria-hidden":"true","data-sentinel":"start"}),de,a.createElement("div",{tabIndex:0,ref:P,style:ie,"aria-hidden":"true","data-sentinel":"end"})))}var ye=a.forwardRef(he),pe=function(t){var u=t.open,h=u===void 0?!1:u,d=t.prefixCls,f=d===void 0?"rc-drawer":d,l=t.placement,i=l===void 0?"right":l,m=t.autoFocus,L=m===void 0?!0:m,k=t.keyboard,T=k===void 0?!0:k,_=t.width,W=_===void 0?378:_,I=t.mask,F=I===void 0?!0:I,x=t.maskClosable,B=x===void 0?!0:x,K=t.getContainer,b=t.forceRender,E=t.afterOpenChange,H=t.destroyOnClose,V=a.useState(!1),M=U(V,2),R=M[0],X=M[1],Y=a.useState(!1),A=U(Y,2),j=A[0],D=A[1];ne(function(){D(!0)},[]);var s=j?h:!1,g=a.useRef(),v=a.useRef();ne(function(){s&&(v.current=document.activeElement)},[s]);var P=function(w){var O;if(X(w),E==null||E(w),!w&&v.current&&!(!((O=g.current)===null||O===void 0)&&O.contains(v.current))){var S;(S=v.current)===null||S===void 0||S.focus()}};if(!b&&!R&&!s&&H)return null;var q=c(c({},t),{},{open:s,prefixCls:f,placement:i,autoFocus:L,keyboard:T,width:W,mask:F,maskClosable:B,inline:K===!1,afterOpenChange:P,ref:g});return a.createElement(fe,{open:s||b||R,autoDestroy:!1,getContainer:K,autoLock:F&&(s||R)},a.createElement(ye,q))};export{pe as D};
