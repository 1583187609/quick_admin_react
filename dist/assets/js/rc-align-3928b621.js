import{e as A,c as k}from"./@babel-25fffde3.js";import{a as q,b as I}from"./dom-align-ecb06dd6.js";import{C as G,d as J,o as K,D as Q,k as U,h as Z}from"./rc-util-48ba7f71.js";import{e as t}from"./react-0fb5d424.js";import{i as _}from"./resize-observer-polyfill-0f9f8adb.js";const x=function(n,e){var i=t.useRef(!1),a=t.useRef(null);function f(){window.clearTimeout(a.current)}function u(s){if(f(),!i.current||s===!0){if(n(s)===!1)return;i.current=!0,a.current=window.setTimeout(function(){i.current=!1},e)}else a.current=window.setTimeout(function(){i.current=!1,u()},e)}return[u,function(){i.current=!1,f()}]};function ee(n,e){return n===e?!0:!n||!e?!1:"pageX"in e&&"pageY"in e?n.pageX===e.pageX&&n.pageY===e.pageY:"clientX"in e&&"clientY"in e?n.clientX===e.clientX&&n.clientY===e.clientY:!1}function ne(n,e){n!==document.activeElement&&G(e,n)&&typeof n.focus=="function"&&n.focus()}function Y(n,e){var i=null,a=null;function f(s){var w=A(s,1),d=w[0].target;if(document.documentElement.contains(d)){var m=d.getBoundingClientRect(),E=m.width,c=m.height,l=Math.floor(E),o=Math.floor(c);(i!==l||a!==o)&&Promise.resolve().then(function(){e({width:l,height:o})}),i=l,a=o}}var u=new _(f);return n&&u.observe(n),function(){u.disconnect()}}function W(n){return typeof n!="function"?null:n()}function C(n){return k(n)!=="object"||!n?null:n}var te=function(e,i){var a=e.children,f=e.disabled,u=e.target,s=e.align,w=e.onAlign,d=e.monitorWindowResize,m=e.monitorBufferTime,E=m===void 0?0:m,c=t.useRef({}),l=t.useRef(),o=t.Children.only(a),v=t.useRef({});v.current.disabled=f,v.current.target=u,v.current.align=s,v.current.onAlign=w;var F=x(function(){var r=v.current,O=r.disabled,T=r.target,B=r.align,X=r.onAlign,R=l.current;if(!O&&T&&R){var h,p=W(T),y=C(T);c.current.element=p,c.current.point=y,c.current.align=B;var V=document,j=V.activeElement;return p&&Z(p)?h=q(R,p,B):y&&(h=I(R,y,B)),ne(j,R),X&&h&&X(R,h),!0}return!1},E),P=A(F,2),g=P[0],S=P[1],H=t.useState(),$=A(H,2),b=$[0],D=$[1],L=t.useState(),z=A(L,2),M=z[0],N=z[1];return J(function(){D(W(u)),N(C(u))}),t.useEffect(function(){(c.current.element!==b||!ee(c.current.point,M)||!K(c.current.align,s))&&g()}),t.useEffect(function(){var r=Y(l.current,g);return r},[l.current]),t.useEffect(function(){var r=Y(b,g);return r},[b]),t.useEffect(function(){f?S():g()},[f]),t.useEffect(function(){if(d){var r=Q(window,"resize",g);return r.remove}},[d]),t.useEffect(function(){return function(){S()}},[]),t.useImperativeHandle(i,function(){return{forceAlign:function(){return g(!0)}}}),t.isValidElement(o)&&(o=t.cloneElement(o,{ref:U(o.ref,l)})),o},re=t.forwardRef(te);re.displayName="Align";export{re as R};
